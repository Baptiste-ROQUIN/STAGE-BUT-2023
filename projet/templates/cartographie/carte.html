<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Display a GeoJSON Layer</title>

  <!--  you want to try out OpenLayers without downloading anything (not recommended for production) 
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.4.0/dist/ol.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.4.0/ol.css">
    -->
  <script src="./../../assets/static/open_layer/dist/ol.js"></script>
  <link rel="stylesheet" href="./../../assets/static/open_layer/ol.css">
  <style>
    #map {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }
    body {
      overflow: hidden;
    }
  </style>
</head>

<body>
  <div id="map">
    <a href="https://www.maptiler.com" style="position:absolute;left:10px;bottom:10px;z-index:999;"><img
        src="https://api.maptiler.com/resources/logo.svg" alt="MapTiler logo"></a>
        <img src="" alt="">
  </div>
  <script>
    const key = 'izsC4a5EZcD9ViO7PDvZ';

    const attribution = new ol.control.Attribution({
      collapsible: false,
    });

    const source = new ol.source.TileJSON({
      url: `https://api.maptiler.com/maps/streets-v2/tiles.json?key=${key}`, // source URL
      tileSize: 512,
      crossOrigin: 'anonymous'
    });

    // const map = new ol.Map({
    // layers: [
    //   new ol.layer.Tile({
    //     source: source
    //   })
    // ],
    // controls: ol.control.defaults.defaults({ attribution: false }).extend([attribution]),
    // target: 'map',

    var map = new ol.Map({
      target: 'map',
      layers: [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        })
      ],
      view: new ol.View({
        constrainResolution: true,
        center: ol.proj.fromLonLat([4, 32]), // starting position [lng, lat]
        zoom: 6 // starting zoom
      })
    });

    const unites_territorial = new ol.layer.Vector({
      source: new ol.source.Vector({
        url: `./../../assets/static/emplacement_point_carte_JSON/directions_regional.geojson`,
        format: new ol.format.GeoJSON()
      }),
      style: new ol.style.Style({
        image: new ol.style.Icon({
          src: './../../assets/static/emplacement_point_carte_JSON/image_directions_regional.png',
          anchor: [0.5, 1],
          size: [512, 512],
          scale: 0.05
        })
      }),
    });


    function clique_unites_territorial() {
      console.log("ok")
    }
    // map.events.register("click", unites_territorial,clique_unites_territorial);  

    map.addLayer(unites_territorial);
  </script>
</body>

</html>